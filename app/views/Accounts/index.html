#{extends 'main.html' /}
#{set title:messages.get('titles.accounts.index') /}

<div class="page-header">
	<h1>&{'labels.accounts'}</h1>
</div>

#{if accounts}
	<table class="table table-hover">
		<thead>
			<tr>
				<th>&{'labels.bank'}</th>
				<th>&{'labels.number'}</th>
				<th>&{'labels.label'}</th>
				<th>&{'labels.balance'}</th>
				<th>&{'labels.date.lastSync'}</th>
				<th>&{'labels.actions'}</th>
			</tr>
		</thead>

		<tbody>
			#{list as:'account', items:accounts}
				<tr data-account-id="${account.id}">
					<td>${account.customer.bank.label}</td>
					<td>${account.number}</td>
					<td><a href="@{Accounts.show(account.id)}">${account.label}</a></td>
					<td>${account.balance.formatCurrency(messages.get('currency'))}</td>
					<td>${account.lastSync?.toDate()?.format(messages.get('datetime.format'))}</td>
					<td><a href="@{Accounts.synchronize(account.id)}"><i class="icon-refresh"></i></a></td>
				</tr>
			#{/list}
		</tbody>
	</table>
#{/if}
#{else}
	<p>&{'info.accounts.empty'}</p>
#{/else}